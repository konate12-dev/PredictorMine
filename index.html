<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PR√âDICTION MINE TRUQU√â üí£‚≠êÔ∏è</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap');
  body, html {
    margin:0; padding:0; height:100%;
    background: #0a0a23;
    font-family: 'Poppins', sans-serif;
    color: #fff;
    overflow-x: hidden;
  }
  .hidden {display:none;}
  #background-canvas {
    position: fixed;
    top:0; left:0; width:100%; height:100%;
    z-index: 0;
    pointer-events:none;
  }
  .container {
    position: relative;
    z-index: 10;
    max-width: 450px;
    margin: 20px auto 100px;
    background: #121234cc;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 0 15px #ffc107aa;
  }
  h1.title {
    color: black;
    background: #ffc107;
    padding: 10px;
    border-radius: 6px;
    text-align: center;
    font-weight: 700;
    font-size: 1.8rem;
    margin-bottom: 15px;
    user-select:none;
  }
  img.main-img {
    display: block;
    max-width: 100%;
    border-radius: 10px;
    margin: 0 auto 20px auto;
    box-shadow: 0 0 15px #ffc107aa;
  }
  .btn {
    background: #ffc107;
    color: #000;
    font-weight: 700;
    border: none;
    border-radius: 8px;
    padding: 14px 25px;
    margin: 8px 10px;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.3s ease;
    user-select:none;
  }
  .btn:hover {
    background: #e0a800;
  }
  .btn-block {
    width: 100%;
    margin-top: 12px;
  }
  label {
    font-size: 1.1rem;
    font-weight: 600;
    display: block;
    margin-bottom: 6px;
    user-select:none;
  }
  input[type="text"] {
    width: 100%;
    font-size: 1rem;
    padding: 10px;
    border-radius: 8px;
    border: none;
    outline: none;
    box-sizing: border-box;
  }
  .error {
    color: #ff5252;
    font-weight: 700;
    margin-top: 8px;
    user-select:none;
  }
  #prediction-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    user-select:none;
  }
  #prediction-table td {
    width: 20%;
    height: 60px;
    border: 2px solid #4444aa;
    background: #001122;
    text-align: center;
    font-size: 1.8rem;
    color: #00ccff;
    cursor: default;
    transition: background 0.3s ease;
  }
  #prediction-table td.star {
    background: #00ccff;
    color: #002244;
    font-size: 2rem;
    font-weight: 900;
    box-shadow: 0 0 8px #00ccff;
  }
  #footer {
    position: fixed;
    bottom: 0; left: 0; width: 100%;
    background: #121234dd;
    color: #ffc107;
    text-align: center;
    padding: 12px 0;
    font-weight: 600;
    font-size: 1rem;
    user-select:none;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    z-index: 20;
  }
  #footer img {
    width: 24px;
    height: 24px;
  }
  #btn-predictor {
    display: block;
    margin: 25px auto 0;
    background: #00ccff;
    color: #001122;
    font-weight: 700;
    font-size: 1.3rem;
    border-radius: 12px;
    padding: 15px 0;
    width: 80%;
    cursor: pointer;
    user-select:none;
    box-shadow: 0 0 12px #00ccffaa;
  }
  #btn-predictor:disabled {
    background: #004466;
    cursor: not-allowed;
    box-shadow: none;
  }
  .fadein {
    animation: fadeIn 1s ease forwards;
  }
  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(10px);}
    to {opacity: 1; transform: translateY(0);}
  }
</style>
</head>
<body>
<canvas id="background-canvas"></canvas>

<!-- PAGE SPLASH -->
<div id="page-splash" class="container fadein">
  <img src="https://favourable-maroon-ui5jxbx6ti.edgeone.app/IMG_5644.jpeg" alt="Splash Image" class="main-img" />
  <div style="text-align:center;">
    <button class="btn" id="btn-already">D√©j√† inscrit</button>
    <button class="btn" id="btn-register">Je m'inscris</button>
  </div>
</div>

<!-- PAGE VERIFICATION -->
<div id="page-verification" class="container hidden">
  <h1 class="title">PR√âDICTION MINE TRUQU√â üí£‚≠êÔ∏è</h1>
  <img src="https://fancy-tan-qec6xrge6d.edgeone.app/IMG_5642.jpeg" alt="Pr√©sentation Site" class="main-img" />
  <form id="verification-form" autocomplete="off">
    <label for="promo-code">Code Promo (obligatoire)</label>
    <input type="text" id="promo-code" placeholder="Entrez code promo" maxlength="5" required />
    <label for="user-id">ID Utilisateur üÜî (4 √† 8 chiffres)</label>
    <input type="text" id="user-id" placeholder="Entrez votre ID" maxlength="8" pattern="\d{4,8}" required />
    <div class="error" id="error-msg"></div>
    <button type="submit" class="btn btn-block">V√©rification</button>
  </form>
</div>

<!-- PAGE PREDICTION -->
<div id="page-prediction" class="container hidden">
  <h1 class="title">PR√âDICTION MINE TRUQU√â üí£‚≠êÔ∏è</h1>
  <table id="prediction-table" aria-label="Tableau de pr√©diction">
    <!-- Tableau 5x5 g√©n√©r√© en JS -->
  </table>
  <button id="btn-predictor" disabled>Nouvelle Pr√©diction</button>
  <p style="text-align:center; margin-top: 15px; font-weight: 600; color: #ffc107;">
    Code promo 1Win : <strong>PCP5</strong> ‚Äì 500% bonus  
  </p>
  <p style="text-align:center; margin-top: 5px;">
    <a href="https://1wlucb.life/?open=register&p=hney" target="_blank" rel="noopener noreferrer" style="color:#00ccff; font-weight: 700; user-select:none;">Inscrivez-vous ici</a>
  </p>
  <div style="text-align:center; margin-top: 15px;">
    <button class="btn" id="btn-back-home" style="background:#ff5252;">Retour</button>
  </div>
</div>

<!-- FOOTER -->
<div id="footer">
  <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram Logo" />
  <a href="https://t.me/+q8Ga3JkIvDAwZDg8" target="_blank" rel="noopener noreferrer" style="color:#ffc107; font-weight: 700; text-decoration:none; user-select:none;">
    Rejoignez notre canal Telegram
  </a>
</div>

<script>
  // Animation fond bombes et √©toiles sur canvas
  const canvas = document.getElementById('background-canvas');
  const ctx = canvas.getContext('2d');
  let width, height;
  let stars = [];
  let bombs = [];
  const STAR_COUNT = 40;
  const BOMB_COUNT = 15;

  function randomRange(min, max) {
    return Math.random() * (max - min) + min;
  }

  class Particle {
    constructor(x, y, size, speedY, color, type) {
      this.x = x;
      this.y = y;
      this.size = size;
      this.speedY = speedY;
      this.color = color;
      this.type = type;
      this.alpha = Math.random();
    }
    update() {
      this.y -= this.speedY;
      this.alpha -= 0.005;
      if(this.alpha <= 0) {
        this.reset();
      }
    }
    reset() {
      this.x = Math.random() * width;
      this.y = height + Math.random() * 50;
      this.alpha = 1;
      this.speedY = randomRange(0.15, 0.35);
      this.size = this.type === 'star' ? randomRange(2, 4) : randomRange(8, 14);
      this.color = this.type === 'star' ? '#ffc107' : '#ff4444';
    }
    draw() {
      ctx.save();
      ctx.globalAlpha = this.alpha;
      ctx.fillStyle = this.color;
      if(this.type === 'star') {
        ctx.beginPath();
        ctx.moveTo(this.x, this.y - this.size / 2);
        for(let i = 0; i < 5; i++) {
          ctx.lineTo(
            this.x + this.size * Math.cos((18 + i * 72) * Math.PI / 180),
            this.y - this.size * Math.sin((18 + i * 72) * Math.PI / 180)
          );
          ctx.lineTo(
            this.x + this.size / 2 * Math.cos((54 + i * 72) * Math.PI / 180),
            this.y - this.size / 2 * Math.sin((54 + i * 72) * Math.PI / 180)
          );
        }
        ctx.closePath();
        ctx.fill();
      } else {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size/2, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.restore();
    }
  }

  function setupParticles() {
    stars = [];
    bombs = [];
    for(let i=0; i<STAR_COUNT; i++) {
      let star = new Particle(
        Math.random() * width,
        Math.random() * height,
        randomRange(2, 4),
        randomRange(0.15, 0.35),
        '#ffc107',
        'star'
      );
      stars.push(star);
    }
    for(let i=0; i<BOMB_COUNT; i++) {
      let bomb = new Particle(
        Math.random() * width,
        Math.random() * height,
        randomRange(8, 14),
        randomRange(0.15, 0.35),
        '#ff4444',
        'bomb'
      );
      bombs.push(bomb);
    }
  }

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    setupParticles();
  }

  function animate() {
    ctx.clearRect(0, 0, width, height);
    stars.forEach(star => {
      star.update();
      star.draw();
    });
    bombs.forEach(bomb => {
      bomb.update();
      bomb.draw();
    });
    requestAnimationFrame(animate);
  }

  window.addEventListener('resize', resize);
  resize();
  animate();

  // Gestion des pages
  const pageSplash = document.getElementById('page-splash');
  const pageVerification = document.getElementById('page-verification');
  const pagePrediction = document.getElementById('page-prediction');

  // Boutons splash
  const btnAlready = document.getElementById('btn-already');
  const btnRegister = document.getElementById('btn-register');

  // Formulaire verification
  const verificationForm = document.getElementById('verification-form');
  const promoCodeInput = document.getElementById('promo-code');
  const userIdInput = document.getElementById('user-id');
  const errorMsg = document.getElementById('error-msg');

  // Prediction
  const predictionTable = document.getElementById('prediction-table');
  const btnPredictor = document.getElementById('btn-predictor');
  const btnBackHome = document.getElementById('btn-back-home');

  // Timer pour d√©lai 30 secondes
  let canPredict = true;

  // Fonction pour afficher une page, cacher les autres
  function showPage(page) {
    pageSplash.classList.add('hidden');
    pageVerification.classList.add('hidden');
    pagePrediction.classList.add('hidden');
    page.classList.remove('hidden');
  }

  // Quand clic sur D√©j√† inscrit ou Je m'inscris -> on va √† la v√©rification
  btnAlready.onclick = () => {
    showPage(pageVerification);
  };
  btnRegister.onclick = () => {
    showPage(pageVerification);
  };

  // V√©rification du formulaire
  verificationForm.addEventListener('submit', e => {
    e.preventDefault();
    errorMsg.textContent = '';
    const promo = promoCodeInput.value.trim().toUpperCase();
    const userId = userIdInput.value.trim();

    const promoValid = promo === 'PCP5';
    const userIdValid = /^[0-9]{4,8}$/.test(userId);

    if (!promoValid || !userIdValid) {
      errorMsg.textContent = '‚ùå Code promo ou ID utilisateur incorrect.';
      return;
    }
    // Si valide, affiche pr√©diction
    generatePrediction();
    showPage(pagePrediction);
  });

  // G√©n√©ration d‚Äôune nouvelle pr√©diction (grille 5x5, √©toiles entre 4 et 7)
  function generatePrediction() {
    if (!canPredict) return;
    canPredict = false;
    btnPredictor.disabled = true;

    predictionTable.innerHTML = '';
    // G√©n√©rer 4 √† 7 √©toiles
    const starCount = Math.floor(Math.random() * 4) + 4; // 4 √† 7

    // Total 25 cases
    const totalCells = 25;
    // Choisir starCount positions uniques al√©atoires
    let starPositions = new Set();
    while (starPositions.size < starCount) {
      starPositions.add(Math.floor(Math.random() * totalCells));
    }

    // Cr√©er lignes et colonnes
    for (let row = 0; row < 5; row++) {
      const tr = document.createElement('tr');
      for (let col = 0; col < 5; col++) {
        const td = document.createElement('td');
        const pos = row * 5 + col;
        if (starPositions.has(pos)) {
          td.classList.add('star');
          td.textContent = '‚≠êÔ∏è';
          // Animation simple au chargement
          td.style.animation = `fadeIn 0.5s ease forwards`;
        } else {
          td.textContent = '';
        }
        tr.appendChild(td);
      }
      predictionTable.appendChild(tr);
    }

    // Timer 30 secondes avant prochaine pr√©diction
    setTimeout(() => {
      canPredict = true;
      btnPredictor.disabled = false;
      btnPredictor.textContent = 'Nouvelle Pr√©diction';
    }, 30000);

    btnPredictor.textContent = 'Veuillez patienter 30 secondes...';
  }

  // Clique sur bouton nouvelle pr√©diction
  btnPredictor.addEventListener('click', () => {
    generatePrediction();
  });

  // Retour accueil
  btnBackHome.addEventListener('click', () => {
    // R√©initialiser form et bouton
    promoCodeInput.value = '';
    userIdInput.value = '';
    errorMsg.textContent = '';
    btnPredictor.disabled = true;
    canPredict = true;
    showPage(pageSplash);
  });

  // Au chargement : afficher splash screen
  showPage(pageSplash);
</script>

</body>
</html>
